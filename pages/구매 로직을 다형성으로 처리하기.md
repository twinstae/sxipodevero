## 문제
	- 지금 스토어에는 새로운 기획과 경우의 수가 추가될 때마다 너무나 많은 조건문이 생기고
	- 코드의 흐름을 한 눈에 파악하기 어렵습니다
	- 놓친 경우의 수에 따라 에러가 발생합니다
	- 서로 다른 관심사가 구매하기 로직에 몰려서 결합됩니다
	- 너무 많은 의존성이 필요합니다
	- 코드가 길어집니다
- 목적
	- 경우의 수와 관심사에 따라 코드를 분리하고 싶습니다
	- 의존성도 각 로직에 필요한 것만 분리하고 싶습니다
	- 그러면서도 전체 로직을 한 눈에 볼 수 있게 하고 싶습니다
	- 여러 경우의 수에 중복되는 로직은 놓치지 않게 하고 싶습니다
	- 합성하기 쉽게 만듭시다
	-
- [[조건부 로직을 다형성으로 바꾸기]]는 [[객체지향 Object Oriented]] 진영에서는 매우 흔한 방법론입니다. 반복되는 if문이나 switch문으로 경우의 수마다 처리해야 하는 로직이 있다면... 각 경우의 수마다 클래스를 만들고, 해당하는 로직의 class의 메서드만 호출하고, 그 로직에 필요한 의존성과 데이터를 같이 전달한다면? 객체가 왜 강력한 [[모듈 module]]화의 도구인지 깨닫게 해주는 것이죠.
- 하지만 저희 팀 (2024년 1월 현재 노머스 프론트 팀)에서는 react를 쓰고 있습니다. 요즘 프론트엔드 생태계에서는 class와 객체지향을 멀리하고 있고, 숙련도도 높지 않습니다.
- 그러면 함수형에서는 어떻게 [[다형성 Polymorphism]]을 처리할까요? 구매 로직을 예시로 삼아 다양한 접근 법들을 비교해보려 합니다.
- ```ts
  const purchase = useCallback(() => {
          if (isAutoPay === undefined) return;
          if (isPasswordSetted === undefined) return;
  
          click({
              key: 'click_button_checkout',
              params: {
                  is_added_fromm_pay_method: isAutoPay,
                  is_set_payment_password: isPasswordSetted,
                  is_order_info_correct: isRightCustomerInfo && isRightDeliveryInfo && isRightEventInfo && isAgreementAllAccepted && isRightRefundInfo,
                  incorrect_info_section: (
                      [
                          !isRightCustomerInfo && 'customer',
                          !isRightDeliveryInfo && 'delivery',
                          !isRightEventInfo && 'event',
                          !isRightRefundInfo && 'payment',
                          !isAgreementAllAccepted && 'agreement'
                      ] as ('customer' | 'delivery' | 'payment' | 'event' | 'agreement' | false)[]
                  ).filter(Boolean),
                  payment_method: methodDict[method?.value ?? 'fromm-tosspayments'],
                  payment_type: `${method?.group ?? 'fromm'}_pay`,
                  currency: currency.code,
                  value: price.toNumber(),
                  items: orderGoodsItem.goodsList.map(({ goods }) => ({
                      goods_id: goods.id,
                      goods_name: goods.name,
                      amount: goods.amount,
                      price: goods.price.toNumber()
                  }))
              }
          });
  
          // 구매 조건들 체크
  
          if (!isRightCustomerInfo) {
              return showAlert({
                  title: t('order-required-customer-error-title'),
                  message: t('order-required-customer-error-message')
              });
          }
  
          if (!isRightDeliveryInfo) {
              return showAlert({
                  title: t('order-required-delivery-error-title'),
                  message: t('order-required-delivery-error-message')
              });
          }
  
          if (!isRightEventInfo) {
              return showAlert({
                  title: t('order-required-event-error-title'),
                  message: t('order-required-event-error-message')
              });
          }
  
          if (!isAgreementAllAccepted) {
              return showAlert({
                  title: t('order-required-agreement-error-title'),
                  message: t('order-required-agreement-error-message')
              });
          }
  
          if (!isRightRefundInfo) {
              return showAlert({
                  title: t('order-required-vbank-refund-error-title'),
                  message: t('order-required-vbank-refund-error-message')
              });
          }
  
          if (!body) return;
  
          if (tempCard && method?.pg.startsWith('paymentwall')) {
              return orderPaymentwallTempCard();
          }
  
          // 자동 결제
          if (paymentWay === 'fromm_pay') {
              // 결제수단이 없으면
              if (!autoPay) {
                  return showAlert({
                      title: newlineToBr(t('order-billing-alert-title')),
                      message: newlineToBr(t('order-billing-alert-message')),
                      ok: {
                          text: t('order-auto-pay-alert-ok'),
                          onClick: () => {
                              router.push(Path.AutoPay);
                          }
                      },
                      cancel: {
                          text: t('order-auto-pay-alert-cancel')
                      }
                  });
              }
  
              // 통화가 다르면
              if (autoPay.currency !== currency.code) {
                  return showAlert({
                      title: t('order-unavailable-currency-alert-title'),
                      message: newlineToBr(t('order-unavailable-currency-alert-message')),
                      ok: {
                          text: t('order-unavailable-currency-alert-ok'),
                          onClick: () => router.push(Path.AutoPay)
                      },
                      cancel: {
                          text: t('order-unavailable-currency-alert-cancel'),
                          onClick: () => router.backOrPush(Path.Arti)
                      }
                  });
              }
  
              // 비밀번호를 설정하지 않았으면
              if (!isPasswordSetted) {
                  return showAlert({
                      title: newlineToBr(t('order-pin-alert-title')),
                      message: newlineToBr(t('order-pin-alert-message')),
                      ok: {
                          text: t('order-auto-pay-alert-ok'),
                          onClick: () => {
                              router.push(Path.AutoPay);
                          }
                      },
                      cancel: {
                          text: t('order-auto-pay-alert-cancel')
                      }
                  });
              }
  
              orderFrommPay();
              return;
          }
  
          // 일반 결제
          orderNormal();
      }, [
          isAutoPay,
          isPasswordSetted,
          click,
          isRightCustomerInfo,
          isRightDeliveryInfo,
          isRightEventInfo,
          isAgreementAllAccepted,
          isRightRefundInfo,
          method?.value,
          method?.group,
          method?.pg,
          currency.code,
          price,
          orderGoodsItem.goodsList,
          body,
          tempCard,
          paymentWay,
          orderNormal,
          showAlert,
          t,
          orderPaymentwallTempCard,
          autoPay,
          orderFrommPay,
          router
      ]);
  ```
-